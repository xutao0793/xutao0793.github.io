(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{708:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react-16-é«˜é˜¶ç»„ä»¶hocï¼šhigher-order-components"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-16-é«˜é˜¶ç»„ä»¶hocï¼šhigher-order-components","aria-hidden":"true"}},[t._v("#")]),t._v(" react-16: é«˜é˜¶ç»„ä»¶"),a("code",[t._v("HOCï¼šHigher order components")])]),t._v(" "),a("p",[t._v("æœ¬èŠ‚æ‘˜è‡ªä»¥ä¸‹å‚è€ƒé“¾æ¥"),a("a",{attrs:{href:"https://blog.csdn.net/maomaoyu3211/article/details/84912436",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç‚¹å‡»æŸ¥çœ‹åŸæ–‡"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://www.jianshu.com/p/0aae7d4d9bc1",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»¥åŠè¿™ç¯‡"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶å‘¢ï¼Ÿæ¯”è¾ƒé«˜é˜¶å‡½æ•°çš„å®šä¹‰ï¼Œé«˜é˜¶ç»„ä»¶å°±æ˜¯æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ç»„ä»¶ï¼Œè¿™ä¸€ç‚¹ä¸€å®šè¦æ³¨æ„ã€‚")]),t._v(" "),a("p",[t._v("åŒæ—¶è¿™é‡Œå¼ºè°ƒä¸€ç‚¹é«˜é˜¶ç»„ä»¶æœ¬èº«å¹¶ä¸æ˜¯ React APIã€‚å®ƒåªæ˜¯ä¸€ç§å®è·µæ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼æ˜¯ç”± React è‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„ã€‚æ›´åŠ é€šä¿—çš„è®²ï¼Œé«˜é˜¶ç»„ä»¶é€šè¿‡åŒ…è£¹ï¼ˆwrappedï¼‰è¢«ä¼ å…¥çš„ React ç»„ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—å¤„ç†ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªç›¸å¯¹å¢å¼ºï¼ˆenhancedï¼‰çš„ React ç»„ä»¶ï¼Œä¾›å…¶ä»–ç»„ä»¶è°ƒç”¨ã€‚ä¸€ä¸ªé«˜é˜¶ç»„ä»¶åªæ˜¯ä¸€ä¸ªåŒ…è£…äº†å¦å¤–ä¸€ä¸ª React ç»„ä»¶çš„ React ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»å·¥å‚ï¼ˆclass factoryï¼‰ï¼Œå®ƒä¸‹æ–¹çš„å‡½æ•°æ ‡ç­¾ä¼ªä»£ç å¯å‘è‡ª Haskell")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("hocFactory:: W: React.Component => E: React.Component\n//è¿™é‡Œ Wï¼ˆWrappedComponentï¼‰ æŒ‡è¢«åŒ…è£…çš„ React.Componentï¼ŒEï¼ˆEnhanced Componentï¼‰ æŒ‡è¿”å›çš„æ–°çš„é«˜é˜¶ React ç»„ä»¶ã€‚\n")])])]),a("p",[t._v("å®šä¹‰ä¸­çš„ã€åŒ…è£…ã€ä¸€è¯æ•…æ„è¢«å®šä¹‰çš„æ¯”è¾ƒæ¨¡ç³Šï¼Œå› ä¸ºå®ƒå¯ä»¥æŒ‡ä¸¤ä»¶äº‹æƒ…ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å±æ€§ä»£ç†ï¼ˆProps Proxyï¼‰ï¼šé«˜é˜¶ç»„ä»¶æ“æ§ä¼ é€’ç»™ WrappedComponent çš„ propsï¼Œ")]),t._v(" "),a("li",[t._v("åå‘ç»§æ‰¿ï¼ˆInheritance Inversionï¼‰ï¼šé«˜é˜¶ç»„ä»¶ç»§æ‰¿ï¼ˆextendsï¼‰WrappedComponentã€‚")])]),t._v(" "),a("h2",{attrs:{id:"ç®€å•çš„ä¾‹å­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•çš„ä¾‹å­","aria-hidden":"true"}},[t._v("#")]),t._v(" ç®€å•çš„ä¾‹å­")]),t._v(" "),a("p",[a("strong",[t._v("å±æ€§ä»£ç† Props Proxy ï¼ˆPPï¼‰")])]),t._v(" "),a("p",[t._v("å±æ€§ä»£ç†çš„å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ppHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé«˜é˜¶ç»„ä»¶çš„ render æ–¹æ³•è¿”å›äº†ä¸€ä¸ª type ä¸º WrappedComponent çš„ React Elementï¼ˆä¹Ÿå°±æ˜¯è¢«åŒ…è£…çš„é‚£ä¸ªç»„ä»¶ï¼‰ï¼Œæˆ‘ä»¬æŠŠé«˜é˜¶ç»„ä»¶æ”¶åˆ°çš„ props ä¼ é€’ç»™å®ƒï¼Œå› æ­¤å¾—å Props Proxyã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åå‘ç»§æ‰¿ Inheritance Inversionï¼ˆIIï¼‰")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iiHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WrappedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¦‚ä½ æ‰€è§ï¼Œè¿”å›çš„é«˜é˜¶ç»„ä»¶ç±»ï¼ˆEnhancerï¼‰ç»§æ‰¿äº† WrappedComponentã€‚è¿™è¢«å«åšåå‘ç»§æ‰¿æ˜¯å› ä¸º WrappedComponent è¢«åŠ¨åœ°è¢« Enhancer ç»§æ‰¿ï¼Œè€Œä¸æ˜¯ WrappedComponent å»ç»§æ‰¿ Enhancerã€‚é€šè¿‡è¿™ç§æ–¹å¼ä»–ä»¬ä¹‹é—´çš„å…³ç³»å€’è½¬äº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"é«˜é˜¶ç»„ä»¶çš„ä½œç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é«˜é˜¶ç»„ä»¶çš„ä½œç”¨","aria-hidden":"true"}},[t._v("#")]),t._v(" é«˜é˜¶ç»„ä»¶çš„ä½œç”¨")]),t._v(" "),a("p",[t._v("æˆ‘å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶åšä»€ä¹ˆå‘¢ï¼Ÿæ¦‚æ‹¬çš„è®²ï¼Œé«˜é˜¶ç»„ä»¶å…è®¸ä½ åšï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä»£ç å¤ç”¨ï¼Œé€»è¾‘æŠ½è±¡ï¼ŒæŠ½ç¦»åº•å±‚å‡†å¤‡ï¼ˆbootstrapï¼‰ä»£ç ")]),t._v(" "),a("li",[t._v("æ¸²æŸ“åŠ«æŒ")]),t._v(" "),a("li",[t._v("State æŠ½è±¡å’Œæ›´æ”¹")]),t._v(" "),a("li",[t._v("Props æ›´æ”¹")])]),t._v(" "),a("p",[t._v('åœ¨ React å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰å¾ˆå¤šæƒ…å†µä¸‹ï¼Œç»„ä»¶éœ€è¦è¢«"å¢å¼º"ï¼Œæ¯”å¦‚è¯´ç»™ç»„ä»¶æ·»åŠ æˆ–è€…ä¿®æ”¹ä¸€äº›ç‰¹å®šçš„ propsï¼Œä¸€äº›æƒé™çš„ç®¡ç†ï¼Œæˆ–è€…ä¸€äº›å…¶ä»–çš„ä¼˜åŒ–ä¹‹ç±»çš„ã€‚è€Œå¦‚æœè¿™ä¸ªåŠŸèƒ½æ˜¯é’ˆå¯¹å¤šä¸ªç»„ä»¶çš„ï¼ŒåŒæ—¶æ¯ä¸€ä¸ªç»„ä»¶éƒ½å†™ä¸€å¥—ç›¸åŒçš„ä»£ç ï¼Œæ˜æ˜¾æ˜¾å¾—ä¸æ˜¯å¾ˆæ˜æ™ºï¼Œæ‰€ä»¥å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ HOCã€‚')]),t._v(" "),a("h2",{attrs:{id:"é«˜é˜¶ç»„ä»¶çš„å®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é«˜é˜¶ç»„ä»¶çš„å®ç°","aria-hidden":"true"}},[t._v("#")]),t._v(" é«˜é˜¶ç»„ä»¶çš„å®ç°")]),t._v(" "),a("h3",{attrs:{id:"å±æ€§ä»£ç†-props-proxy-ï¼ˆppï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å±æ€§ä»£ç†-props-proxy-ï¼ˆppï¼‰","aria-hidden":"true"}},[t._v("#")]),t._v(" å±æ€§ä»£ç† Props Proxy ï¼ˆPPï¼‰")]),t._v(" "),a("p",[t._v("Props Proxy å¯ä»¥åšä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("æ›´æ”¹ props")]),t._v(" "),a("li",[t._v("é€šè¿‡ refs è·å–ç»„ä»¶å®ä¾‹")]),t._v(" "),a("li",[t._v("æŠ½è±¡ state")]),t._v(" "),a("li",[t._v("æŠŠ WrappedComponent ä¸å…¶å®ƒ elements åŒ…è£…åœ¨ä¸€èµ·")])]),t._v(" "),a("h4",{attrs:{id:"æ›´æ”¹-props"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ”¹-props","aria-hidden":"true"}},[t._v("#")]),t._v(" æ›´æ”¹ props")]),t._v(" "),a("p",[t._v("ä½ å¯ä»¥"),a("strong",[t._v("è¯»å–ï¼Œæ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤")]),t._v("å°†è¦ä¼ é€’ç»™ WrappedComponent çš„ propsã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­ï¼šæ·»åŠ æ–° propsã€‚æ¯”å¦‚ä¾‹å­ä¸­ç›®å‰ç™»é™†çš„ä¸€ä¸ªç”¨æˆ·å¯ä»¥åœ¨ WrappedComponent é€šè¿‡ this.props.user è·å–ç”¨æˆ·ä¿¡æ¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ppHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" currentLoggedInUser\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("newProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"é€šè¿‡-refs-è·å–ç»„ä»¶å®ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡-refs-è·å–ç»„ä»¶å®ä¾‹","aria-hidden":"true"}},[t._v("#")]),t._v(" é€šè¿‡ refs è·å–ç»„ä»¶å®ä¾‹")]),t._v(" "),a("p",[t._v("ä½ å¯ä»¥é€šè¿‡ ref è·å–å…³é”®è¯ thisï¼ˆWrappedComponent çš„å®ä¾‹ï¼‰ï¼Œä½†æ˜¯æƒ³è¦å®ƒç”Ÿæ•ˆï¼Œå¿…é¡»å…ˆç»å†ä¸€æ¬¡æ­£å¸¸çš„æ¸²æŸ“è¿‡ç¨‹æ¥è®© ref å¾—åˆ°è®¡ç®—ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦åœ¨é«˜é˜¶ç»„ä»¶çš„ render æ–¹æ³•ä¸­è¿”å› WrappedComponentï¼Œè®© React è¿›è¡Œ reconciliation è¿‡ç¨‹ï¼Œè¿™ä¹‹åä½ å°±é€šè¿‡ ref è·å–åˆ°è¿™ä¸ª WrappedComponent çš„å®ä¾‹äº†ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­ï¼šä¸‹æ–¹ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†é€šè¿‡ ref è·å– WrappedComponent å®ä¾‹å¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("refsHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RefsHOC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("wrappedComponentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            wrappedComponentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                ref"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å½“ WrappedComponent è¢«æ¸²æŸ“åï¼Œref ä¸Šçš„å›è°ƒå‡½æ•° proc å°†ä¼šæ‰§è¡Œï¼Œæ­¤æ—¶ proc å°±æœ‰äº†è¿™ä¸ª WrappedComponent çš„å®ä¾‹çš„å¼•ç”¨ã€‚å¯ä»¥è¿™é‡Œç”¨æ¥ã€è¯»å–ï¼Œæ·»åŠ ã€å®ä¾‹çš„ props æˆ–åœ¨è¿™é‡Œç”¨æ¥æ‰§è¡Œå®ä¾‹æ–¹æ³• methodã€‚")]),t._v(" "),a("h4",{attrs:{id:"æŠ½è±¡-state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æŠ½è±¡-state","aria-hidden":"true"}},[t._v("#")]),t._v(" æŠ½è±¡ state")]),t._v(" "),a("p",[t._v("ä½ å¯ä»¥é€šè¿‡å‘ WrappedComponent ä¼ é€’ props å’Œ callbacksï¼ˆå›è°ƒå‡½æ•°ï¼‰æ¥æŠ½è±¡ stateï¼Œè¿™å’Œ React ä¸­å¦å¤–ä¸€ä¸ªç»„ä»¶æ„æˆæ€æƒ³ Presentational and Container Components å¾ˆç›¸ä¼¼ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­ï¼šåœ¨ä¸‹é¢è¿™ä¸ªæŠ½è±¡ state çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¹¼ç¨šåœ°ï¼ˆåŸè¯æ˜¯ naively ğŸ˜„ï¼‰æŠ½è±¡å‡ºäº† name input çš„ value å’Œ onChangeã€‚æˆ‘è¯´è¿™æ˜¯å¹¼ç¨šçš„æ˜¯å› ä¸ºè¿™æ ·å†™å¹¶ä¸å¸¸è§ï¼Œä½†æ˜¯ä½ ä¼šç†è§£åˆ°ç‚¹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ppHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onNameChange "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onNameChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onNameChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    onChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onNameChange\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("newProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æˆ–è€…å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°è£…äº†ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒçš„åŠŸèƒ½å’Œæ˜¾ç¤ºå®Œå…¨ç”±å¤–éƒ¨ä¼ å…¥çš„å±æ€§ä¼ å…¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šä¹‰ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œç»™æ™®é€šæŒ‰é’®æ·»åŠ submitäº¤äº’")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("EnhancedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_EnhancedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'submit'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'submit'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Component\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    handler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    _EnhancedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EnhancedComponent'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _EnhancedComponent\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ç°æŒ‰é’®åŠŸèƒ½å¢å¼º")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" EnhancedButton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("EnhancedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("EnhancedButton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"æŠŠ-wrappedcomponent-ä¸å…¶å®ƒ-elements-åŒ…è£…åœ¨ä¸€èµ·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æŠŠ-wrappedcomponent-ä¸å…¶å®ƒ-elements-åŒ…è£…åœ¨ä¸€èµ·","aria-hidden":"true"}},[t._v("#")]),t._v(" æŠŠ WrappedComponent ä¸å…¶å®ƒ elements åŒ…è£…åœ¨ä¸€èµ·")]),t._v(" "),a("p",[t._v("å‡ºäºæ“ä½œæ ·å¼ã€å¸ƒå±€æˆ–å…¶å®ƒç›®çš„ï¼Œä½ å¯ä»¥å°† WrappedComponent ä¸å…¶å®ƒç»„ä»¶åŒ…è£…åœ¨ä¸€èµ·ã€‚ä¸€äº›åŸºæœ¬çš„ç”¨æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£å¸¸çš„çˆ¶ç»„ä»¶æ¥å®ç°ï¼ˆé™„å½• Bï¼‰ï¼Œä½†æ˜¯å°±åƒä¹‹å‰æ‰€æè¿°çš„ï¼Œä½¿ç”¨é«˜é˜¶ç»„ä»¶ä½ å¯ä»¥è·å¾—æ›´å¤šçš„çµæ´»æ€§ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­ï¼šåŒ…è£…æ¥æ“ä½œæ ·å¼")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ppHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" display"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'block'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"åå‘ç»§æ‰¿-inheritance-inversionï¼ˆiiï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åå‘ç»§æ‰¿-inheritance-inversionï¼ˆiiï¼‰","aria-hidden":"true"}},[t._v("#")]),t._v(" åå‘ç»§æ‰¿ Inheritance Inversionï¼ˆIIï¼‰")]),t._v(" "),a("p",[t._v("å¯ä»¥ç”¨åå‘ç»§æ‰¿é«˜é˜¶ç»„ä»¶åšä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("æ¸²æŸ“åŠ«æŒï¼ˆRender Highjackingï¼‰")]),t._v(" "),a("li",[t._v("æ“ä½œ state")])]),t._v(" "),a("h4",{attrs:{id:"æ¸²æŸ“åŠ«æŒï¼ˆrender-highjackingï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¸²æŸ“åŠ«æŒï¼ˆrender-highjackingï¼‰","aria-hidden":"true"}},[t._v("#")]),t._v(" æ¸²æŸ“åŠ«æŒï¼ˆRender Highjackingï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ¸²æŸ“ æŒ‡çš„æ˜¯ WrappedComponent.render æ–¹æ³•")]),t._v("\nä½ æ— æ³•æ›´æ”¹æˆ–åˆ›å»º props ç»™ WrappedComponent å®ä¾‹ï¼Œå› ä¸º React ä¸å…è®¸å˜æ›´ä¸€ä¸ªç»„ä»¶æ”¶åˆ°çš„ propsï¼Œä½†æ˜¯ä½ å¯ä»¥åœ¨ render æ–¹æ³•é‡Œæ›´æ”¹å­å…ƒç´ /å­ç»„ä»¶ä»¬çš„ propsã€‚")])]),t._v(" "),a("p",[t._v("å«åšæ¸²æŸ“åŠ«æŒæ˜¯å› ä¸ºé«˜é˜¶ç»„ä»¶æ§åˆ¶äº† WrappedComponent ç”Ÿæˆçš„æ¸²æŸ“ç»“æœï¼Œå¹¶ä¸”å¯ä»¥åšå„ç§æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("é€šè¿‡æ¸²æŸ“åŠ«æŒä½ å¯ä»¥ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("è¯»å–ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤")]),t._v("ä»»ä½•ä¸€ä¸ªå°†è¢«æ¸²æŸ“çš„ React Element çš„ props")]),t._v(" "),a("li",[t._v("åœ¨æ¸²æŸ“æ–¹æ³•ä¸­è¯»å–æˆ–æ›´æ”¹ React Elements treeï¼Œä¹Ÿå°±æ˜¯ WrappedComponent çš„ children")]),t._v(" "),a("li",[t._v("æ ¹æ®æ¡ä»¶ä¸åŒï¼Œé€‰æ‹©æ€§çš„æ¸²æŸ“å­æ ‘")]),t._v(" "),a("li",[t._v("ç»™å­æ ‘é‡Œçš„å…ƒç´ å˜æ›´æ ·å¼")])]),t._v(" "),a("blockquote",[a("p",[t._v("åå‘ç»§æ‰¿çš„é«˜é˜¶ç»„ä»¶ä¸èƒ½ä¿è¯ä¸€å®šæ¸²æŸ“æ•´ä¸ªå­å…ƒç´ æ ‘ï¼Œè¿™åŒæ—¶ä¹Ÿç»™æ¸²æŸ“åŠ«æŒå¢æ·»äº†ä¸€äº›é™åˆ¶ã€‚é€šè¿‡åå‘ç»§æ‰¿ï¼Œä½ åªèƒ½åŠ«æŒ WrappedComponent æ¸²æŸ“çš„å…ƒç´ ï¼Œè¿™æ„å‘³ç€å¦‚æœ WrappedComponent çš„å­å…ƒç´ é‡Œæœ‰ Function ç±»å‹çš„ React Elementï¼Œä½ ä¸èƒ½åŠ«æŒè¿™ä¸ªå…ƒç´ é‡Œé¢çš„å­å…ƒç´ æ ‘çš„æ¸²æŸ“ã€‚")])]),t._v(" "),a("h5",{attrs:{id:"æ¡ä»¶æ€§æ¸²æŸ“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ä»¶æ€§æ¸²æŸ“","aria-hidden":"true"}},[t._v("#")]),t._v(" æ¡ä»¶æ€§æ¸²æŸ“")]),t._v(" "),a("p",[t._v("å¦‚æœ this.props.loggedIn æ˜¯ trueï¼Œè¿™ä¸ªé«˜é˜¶ç»„ä»¶ä¼šåŸå°ä¸åŠ¨åœ°æ¸²æŸ“ WrappedComponentï¼Œå¦‚æœä¸æ˜¯ true åˆ™ä¸æ¸²æŸ“ï¼ˆå‡è®¾æ­¤ç»„ä»¶ä¼šæ”¶åˆ° loggedIn çš„ propï¼‰")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iiHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WrappedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loggedIn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"é€šè¿‡-render-æ¥æ”¹å˜-react-elements-tree-çš„æ¸²æŸ“ç»“æœ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡-render-æ¥æ”¹å˜-react-elements-tree-çš„æ¸²æŸ“ç»“æœ","aria-hidden":"true"}},[t._v("#")]),t._v(" é€šè¿‡ render æ¥æ”¹å˜ React Elements tree çš„æ¸²æŸ“ç»“æœ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("iiHOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WrappedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" elementsTree "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementsTree "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" elementsTree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'input'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                newProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'may the force be with you'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" elementsTree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newElementsTree "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cloneElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                elementsTree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                elementsTree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" newElementsTree\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œä½ å¯ä»¥åšä»»ä½•æ“ä½œï¼Œæ¯”å¦‚ä½ å¯ä»¥éå†æ•´ä¸ª element tree ç„¶åå˜æ›´æŸäº›å…ƒç´ çš„ propsã€‚è¿™æ°å¥½å°±æ˜¯ Radium çš„å·¥ä½œæ–¹å¼ã€‚")]),t._v(" "),a("h4",{attrs:{id:"æ“ä½œ-state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ“ä½œ-state","aria-hidden":"true"}},[t._v("#")]),t._v(" æ“ä½œ state")]),t._v(" "),a("p",[t._v("é«˜é˜¶ç»„ä»¶å¯ä»¥ "),a("strong",[t._v("è¯»å–ã€ä¿®æ”¹ã€åˆ é™¤")]),t._v("WrappedComponent å®ä¾‹çš„ stateï¼Œå¦‚æœéœ€è¦ä¹Ÿå¯ä»¥æ·»åŠ æ–°çš„ stateã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("éœ€è¦è®°ä½çš„æ˜¯ï¼Œä½ åœ¨å¼„ä¹± WrappedComponent çš„ stateï¼Œå¯èƒ½ä¼šå¯¼è‡´ç ´åä¸€äº›ä¸œè¥¿ã€‚é€šå¸¸ä¸å»ºè®®ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥è¯»å–æˆ–æ·»åŠ  stateï¼Œæ·»åŠ  state éœ€è¦ä½¿ç”¨å‘½åç©ºé—´æ¥é˜²æ­¢ä¸ WrappedComponent çš„ state å†²çªã€‚")])]),t._v(" "),a("p",[t._v("ç¤ºä¾‹ï¼šé€šè¿‡æ˜¾ç¤º WrappedComponent çš„ props å’Œ state æ¥ debug")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IIHOCDEBUGGER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("II")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WrappedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOC")]),t._v(" Debugger Component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Props"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pre"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pre"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("State"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pre"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pre"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"é™„å½•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™„å½•","aria-hidden":"true"}},[t._v("#")]),t._v(" é™„å½•")]),t._v(" "),a("h3",{attrs:{id:"å‘½å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‘½å","aria-hidden":"true"}},[t._v("#")]),t._v(" å‘½å")]),t._v(" "),a("p",[t._v("å½“é€šè¿‡é«˜é˜¶ç»„ä»¶æ¥åŒ…è£…ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä½ ä¼šä¸¢å¤±åŸå…ˆ WrappedComponent çš„åå­—ï¼Œå¯èƒ½ä¼šç»™å¼€å‘å’Œ debug é€ æˆå½±å“ã€‚")]),t._v(" "),a("p",[t._v("å¸¸è§çš„è§£å†³æ–¹æ³•æ˜¯åœ¨åŸå…ˆçš„ WrappedComponent çš„åå­—å‰é¢æ·»åŠ ä¸€ä¸ªå‰ç¼€ã€‚ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ˜¯ä» React-Redux ä¸­æ‹¿æ¥çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("HOC(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDisplayName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("WrappedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//or")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HOC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" displayName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("HOC(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDisplayName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("WrappedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ–¹æ³• getDisplayName è¢«å¦‚ä¸‹å®šä¹‰ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDisplayName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" WrappedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("displayName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n         WrappedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n         â€˜Componentâ€™\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ç»„ä»¶çš„ dispalyName é™æ€å±æ€§")])]),t._v(" "),a("p",[t._v("ä¸Šä¾‹ä¸­æˆ‘ä»¬çœ‹åˆ° React ç»„ä»¶"),a("code",[t._v("displayName")]),t._v("é™æ€å±æ€§çš„ä½¿ç”¨ã€‚åŒå‰é¢è®²è¿‡çš„ React ç»„ä»¶ç±»çš„é™æ€å±æ€§"),a("code",[t._v("defaultProps")]),t._v(" "),a("code",[t._v("propTypes")]),t._v("ä¸€æ ·ä½¿ç”¨ï¼Œåœ¨ç»„ä»¶ç±»å¤–éƒ¨å®šä¹‰ï¼Œç”¨äºå®šä¹‰ React çš„å…ƒç´ åã€‚")]),t._v(" "),a("p",[t._v("å½“ React çš„å…ƒç´ åç§°å’Œç»„ä»¶ç±»åä¸åŒæ—¶ï¼Œéœ€è¦è®¾ç½® displayNameï¼ˆé»˜è®¤ç»„ä»¶åå°±æ˜¯ç±»åï¼Œå¯ä»¥å¹¶ä¸æ€»æ˜¯ä½ æƒ³è¦çš„åç§°ï¼‰ã€‚æ­¤ä¾‹ä¸­å‡½æ•°åæ˜¯"),a("code",[t._v("EnhancedComponent")]),t._v(",ä½†å®šä¹‰ç±»åæ˜¯"),a("code",[t._v("_EnhancedComponent")]),t._v("ï¼Œæ‰€ä»¥éœ€è¦å°†ç»„ä»¶ç±»åé‡å‘½åä¸ºå¤–éƒ¨å‡½æ•°åã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("åœ¨ ES ä¸­é€šå¸¸ä½¿ç”¨ä¸‹åˆ’çº¿( _ )æ¥å®šä¹‰å†…éƒ¨ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œæ­¤å±æ€§æˆ–æ–¹æ³•ä¸ä½œä¸ºæš´éœ²ç»™å¤–éƒ¨æ¥å£ã€‚è¿™æ˜¯ä¸€ç§å·¥ç¨‹å¸ˆå®è·µä¸­çº¦å®šæˆç†Ÿçš„æƒ¯ä¾‹ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"é«˜é˜¶ç»„ä»¶å’Œå‚æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é«˜é˜¶ç»„ä»¶å’Œå‚æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" é«˜é˜¶ç»„ä»¶å’Œå‚æ•°")]),t._v(" "),a("p",[t._v("æœ‰æ—¶ï¼Œåœ¨é«˜é˜¶ç»„ä»¶ä¸­ä½¿ç”¨å‚æ•°æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™ä¸ªåœ¨ä»¥ä¸Šæ‰€æœ‰ä¾‹å­ä¸­éƒ½ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯å¯¹äºä¸­ç­‰çš„ JavaScript å¼€å‘è€…æ˜¯æ¯”è¾ƒè‡ªç„¶çš„äº‹æƒ…ã€‚è®©æˆ‘ä»¬è¿…é€Ÿçš„ä»‹ç»ä¸€ä¸‹ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å­ï¼šä¸€ä¸ªç®€å•çš„ Props Proxy é«˜é˜¶ç»„ä»¶æ­é…å‚æ•°ã€‚é‡ç‚¹æ˜¯è¿™ä¸ª HOCFactoryFactory æ–¹æ³•ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HOCFactoryFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something with params")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HOCFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HOC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HOCFactoryFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("WrappedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//or")]),t._v("\n@"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HOCFatoryFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WrappedComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"é«˜é˜¶ç»„ä»¶å’Œçˆ¶ç»„ä»¶çš„ä¸åŒä¹‹å¤„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é«˜é˜¶ç»„ä»¶å’Œçˆ¶ç»„ä»¶çš„ä¸åŒä¹‹å¤„","aria-hidden":"true"}},[t._v("#")]),t._v(" é«˜é˜¶ç»„ä»¶å’Œçˆ¶ç»„ä»¶çš„ä¸åŒä¹‹å¤„")]),t._v(" "),a("p",[t._v("çˆ¶ç»„ä»¶å°±æ˜¯å•çº¯çš„ React ç»„ä»¶åŒ…å«äº†ä¸€äº›å­ç»„ä»¶ï¼ˆchildrenï¼‰ã€‚React æä¾›äº†è·å–å’Œæ“ä½œä¸€ä¸ªç»„ä»¶çš„ children çš„ APIsã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Parent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Parent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mountNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("åœ¨æ¥æ€»ç»“ä¸€ä¸‹çˆ¶ç»„ä»¶èƒ½åšå’Œä¸èƒ½åšçš„äº‹æƒ…ï¼ˆä¸é«˜é˜¶ç»„ä»¶å¯¹æ¯”ï¼‰ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¸²æŸ“åŠ«æŒ")]),t._v(" "),a("li",[t._v("æ“ä½œå†…éƒ¨ props")]),t._v(" "),a("li",[t._v("æŠ½è±¡ stateã€‚ä½†æ˜¯æœ‰ç¼ºç‚¹ï¼Œä¸èƒ½å†çˆ¶ç»„ä»¶å¤–è·å–åˆ°å®ƒçš„ stateï¼Œé™¤éæ˜ç¡®åœ°å®ç°äº†é’©å­ã€‚")]),t._v(" "),a("li",[t._v("ä¸æ–°çš„ React Element åŒ…è£…ã€‚è¿™ä¼¼ä¹æ˜¯å”¯ä¸€ä¸€ç‚¹ï¼Œä½¿ç”¨çˆ¶ç»„ä»¶è¦æ¯”é«˜é˜¶ç»„ä»¶å¼ºï¼Œä½†é«˜é˜¶ç»„ä»¶ä¹ŸåŒæ ·å¯ä»¥å®ç°ã€‚")]),t._v(" "),a("li",[t._v("Children çš„æ“æ§ã€‚å¦‚æœ children ä¸æ˜¯å•ä¸€ rootï¼Œåˆ™éœ€è¦å¤šæ·»åŠ ä¸€å±‚æ¥åŒ…æ‹¬æ‰€æœ‰ childrenï¼Œå¯èƒ½ä¼šä½¿ä½ çš„ markup å˜å¾—æœ‰ç‚¹ç¬¨é‡ã€‚ä½¿ç”¨é«˜é˜¶ç»„ä»¶å¯ä»¥ä¿è¯å•ä¸€ rootã€‚")]),t._v(" "),a("li",[t._v("çˆ¶ç»„ä»¶å¯ä»¥åœ¨å…ƒç´ æ ‘ç«‹éšæ„ä½¿ç”¨ï¼Œå®ƒä»¬ä¸åƒé«˜é˜¶ç»„ä»¶ä¸€æ ·é™åˆ¶äºä¸€ä¸ªç»„ä»¶ã€‚")])]),t._v(" "),a("p",[t._v("é€šå¸¸æ¥è®²ï¼Œèƒ½ä½¿ç”¨çˆ¶ç»„ä»¶è¾¾åˆ°çš„æ•ˆæœï¼Œå°½é‡ä¸è¦ç”¨é«˜é˜¶ç»„ä»¶ï¼Œå› ä¸ºé«˜é˜¶ç»„ä»¶æ˜¯ä¸€ç§æ›´ hack çš„æ–¹æ³•ï¼Œä½†åŒæ—¶ä¹Ÿæœ‰æ›´é«˜çš„çµæ´»æ€§ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);