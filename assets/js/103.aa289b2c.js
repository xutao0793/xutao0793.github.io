(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{629:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"dom-style-元素样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-style-元素样式","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM Style 元素样式")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#stylesheet-cssstylesheet"}},[t._v("StyleSheet <- CSSStyleSheet")])]),s("li",[s("a",{attrs:{href:"#cssrule-cssstylerule"}},[t._v("cssRule <- CSSStyleRule")])]),s("li",[s("a",{attrs:{href:"#cssstyledeclaration"}},[t._v("CSSStyleDeclaration")])]),s("li",[s("a",{attrs:{href:"#window-getcomputedstyle"}},[t._v("window.getComputedStyle()")])])])]),s("p"),t._v(" "),s("p",[t._v("一个文档引入CSS样式有三种方式：")]),t._v(" "),s("ul",[s("li",[t._v("内联式：在元素开始标签中定义sytle特性；")]),t._v(" "),s("li",[t._v("内嵌式：在head元素中使用"),s("code",[t._v("<style>")]),t._v("标签；")]),t._v(" "),s("li",[t._v("引入式：在head元素中通过"),s("code",[t._v("<link>")]),t._v("标签引入外部定义的样式表。")])]),t._v(" "),s("p",[t._v("所以CSSOM（CSS文档对象模型）定义了描述样式表的接口："),s("code",[t._v("styleSheet / CSSStyleSheet")])]),t._v(" "),s("p",[t._v("一个样式表是由很多规则集合组成的（规则=选择器+样式声明）。所以CSSOM也定义了描述样式规则的接口："),s("code",[t._v("CSSRule / CSSStyleRule")])]),t._v(" "),s("p",[t._v("一个规则中包含着很多CSS样式声明（声明=属性：属性值）。所以CSSOM也定义了描述样式声明的接口："),s("code",[t._v("CSSStyleDeclaration")])]),t._v(" "),s("p",[t._v("接下来，我们看下这些接口都提供了哪些属性或方法来操作样式：")]),t._v(" "),s("h2",{attrs:{id:"stylesheet-cssstylesheet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stylesheet-cssstylesheet","aria-hidden":"true"}},[t._v("#")]),t._v(" StyleSheet <- CSSStyleSheet")]),t._v(" "),s("p",[t._v("控制台输入"),s("code",[t._v("styleSheet.prototype")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("type：值是'text/css'\nhref: 样式表引用地址\ntitle: 当前样式表的title特性值\ndisabled：返回Boolean表示当前样式表是否可用\nmedia: 此样式表包含的媒体查询样式对象mediaList\nownerNode: 此样式表与之相关联的文档，即当前文档document\nparentStyleSheet: 返回 StyleSheet 如果有的话; 返回 null 如果没有\n")])])]),s("p",[s("code",[t._v("CSSStyleSheet")]),t._v("是专门针对CSS样式表的接口，表示一个单一样式表对象，继承于"),s("code",[t._v("styleSheet")]),t._v("接口，所以输入"),s("code",[t._v("CSSStyleSheet.prototype")]),t._v("，除了返回上述列出的继承属性外，还定义以下属性和方法：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cssRules: 返回样式表中CSS规则的CSSRuleList（CSSRule对象集合）\nrules:\ninsertRule()\ndeleteRule()\nreplace()\naddRule()\nremoveRule()\n")])])]),s("p",[t._v("文档实例对象doucment的属性styleSheets返回的样式列表集合中的元素就是"),s("code",[t._v("CSSStyleSheet")]),t._v("类的实例。以及通过定义在"),s("code",[t._v("HTMLLinkElement")]),t._v("和"),s("code",[t._v("HTMLStyleElement")]),t._v("接口的sheet属性获取样式表也是"),s("code",[t._v("CSSStyleSheet")]),t._v("类的实例。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sheet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("styleSheets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// document.styleSheets会返回包含`<style>`元素和`rel="stylesheet"`的`<link>`元素引入的样式表。')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" linkSheet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'link'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sheet\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" styleSheet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sheet\n")])])]),s("p",[t._v("以上"),s("code",[t._v("sheet / linkSheet / sytleSheet")]),t._v("都是单个样式表，都是"),s("code",[t._v("CSSStyleSheet")]),t._v("类的实例，拥有上述的列出的属性和方法。")]),t._v(" "),s("h2",{attrs:{id:"cssrule-cssstylerule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cssrule-cssstylerule","aria-hidden":"true"}},[t._v("#")]),t._v(" cssRule <- CSSStyleRule")]),t._v(" "),s("p",[t._v("CSSRule 接口描述了单一的CSS规则。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('type: 规则类型，表示CSS规则类型，即`text/css`\ncssText: 返回规则的文本表示. 例如 "h1,h2 { font-size: 16pt }"\nparentRule: 返回包含规则，否则返回 null。例如：如果此规则是 @media 块中的样式规则, 则其父规则将是该 CSSMediaRule\nparentStyleSheet: 返回包含此规则的样式表的 CSSStyleSheet 对象\n\n/**\n* CSS样式表的规则有多种类型：常规下是正常的CSS样式规则（CSSStyleRule)，其它类型包括@inport 、@media、 @font-face、@page、@charset\n* 但这些规则很少通过脚本来访问，所以我们主要关注STYLE_RULE: 1类型，对应的就是CSSStyleRule接口。\n*/\nSTYLE_RULE: 1\nCHARSET_RULE: 2\nIMPORT_RULE: 3\nMEDIA_RULE: 4\nFONT_FACE_RULE: 5\nPAGE_RULE: 6\nNAMESPACE_RULE: 10\nKEYFRAMES_RULE: 7\nKEYFRAME_RULE: 8\n')])])]),s("p",[t._v("CSSStyleRule接口继承于CSSRule接口，表示常规下写入的CSS样式（即STYLE_RULE===1），除了继承上述4个属性外，还另外定义了下列属性（无方法）：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("selectorText: 声明的选择器文本，如`.some-class`\nstyle: 返回一个CSSStyleDeclaration接口实例，表示当前元素的所有样式声明，如{fontSize:'20px',backgroundColor:'red'}\n")])])]),s("h2",{attrs:{id:"cssstyledeclaration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cssstyledeclaration","aria-hidden":"true"}},[t._v("#")]),t._v(" CSSStyleDeclaration")]),t._v(" "),s("p",[t._v("CSSStyleDeclaration接口描述了CSS样式声明的属性和方法，表示一个CSS属性和属性值的键值对的集合。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cssText: 声明块的文本内容。也可以设置这个属性来改变样式。区别规则中的cssText，不会包括选择器字符，例如：\"background-color:red;font-size:20px;\"\nparentRule: 包含的 CssRule接口实例\nlength: 正文获取属性item()返回的属性数量\n\ngetPropertyPriority(): 返回样式优先级。例如：priString= styleObj.getPropertyPriority('color')\nitem(): 返回属性名\ngetPropertyValue(): 返回属性值。例如: valString= styleObj.getPropertyValue('color')\nremoveProperty(): 返回被删除的属性。例如: valString= styleObj.removeProperty('color')\nsetProperty():  设置属性值，方法没有返回值。例如: styleObj.setProperty('color', 'red', 'important')\n")])])]),s("p",[t._v("以下这个API实现了CSSStyleDeclaration类：")]),t._v(" "),s("ul",[s("li",[t._v("HTMLElement.style")]),t._v(" "),s("li",[t._v("CSSStyleRule.style")]),t._v(" "),s("li",[t._v("document.defaultView.getComputedStyle() (浏览器环境中document.dafultView === window)")])]),t._v(" "),s("p",[t._v("例子：操作内联样式（style属性）")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("HMTLElement")]),t._v("接口定义了一个style属性，可以获取元素实例对象的当前样式，和设置元素的内联样式")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n* 元素样式属性只能一个一个设置\n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oDiv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// oDiv 是 HTMLElement类的实例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" divStyle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oDiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// GET:通过实例继承的属性style获取样式，style获取到的样式对象就是CSSStyleDeclaration类的实例对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" divStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SET: 设置的样式将以行内样式体现")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" divStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fontSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20px'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SET: 设置的样式将以行内样式体现")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" divStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// remove：移除样式")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n* 元素样式批量获取或设置\n* 因为HTMLElement.style是CSSStyleDeclaration类的实例对象，所以也可以使用cssText批量获取或设置样式\n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" divStyle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oDiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText\noDiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"background-color:red;font-size:20px;"')]),t._v("\noDiv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n")])])]),s("ul",[s("li",[t._v("内嵌样式表和外部样式表的操作")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" firstSheet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("styleSheets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" firstCSSRule "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" firstSheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssRules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" styleObj"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" firstCSSRule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("styleObj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" styleObj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" nameString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" styleObj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   styleObj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nameString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("styleObj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"window-getcomputedstyle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#window-getcomputedstyle","aria-hidden":"true"}},[t._v("#")]),t._v(" window.getComputedStyle()")]),t._v(" "),s("p",[t._v("虽然style对象能够提供元素的样式信息，但返回的只是定义在该元素上的样式（通过行内sytle或类等定义在自身上的样式），并不包含从其它样式表层叠而来的样式信息。所以DOM 2级增加了"),s("code",[t._v("document.defaultView")]),t._v("对象，增加了"),s("code",[t._v("getComputedStyle()")]),t._v("方法来获取元素实际生效的样式。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 语法：\ngetComputedStyle(目标元素, 伪元素信息 )，伪元素信息是:after / :before，如果没有就 null\n\n返回的是一个只读的CSSStyleDeclaration接口实例。\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);